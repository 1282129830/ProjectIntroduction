#### 细粒度控制

>细粒度控制就是对数据的访问进行控制

###### 项目中使用需求

普通员工查看自己添加的记录，部门经理查看当前部门下所有员工添加的记录，总经理查看当前部门及下属部门的所有记录。

###### 部门经理及普通员工实现思路

通过对数据添加录入信息进行分组管理，普通员工根据录入人信息查询，部门经理根据录入人所在部门查询。

比如说小王要查询，那么小王的查询条件就是根据数据库里的录入人字段进行查询，这样小王录入的数据就可以全部查询到了，如果部门经理要查询的话，就根据录入人部门字段进行查询。

###### 跨部门数据权限实现思路

如果要跨部门查询数据，或者查询部门及下属部门的所有记录，可以通过对部门的id进行有规则的改造，查询数据库时就可以借助like模糊查询的方式完成子部门的数据查询。

比如集团部门的话我们可以把部门id设置成100，下属部门1可以设置为10010，下属部门2可以设置为10011，这样集团部门想要查询下属部门就可以通过like模糊查询100即可查询到本部门及所有下属部门的数据。