#### 登录功能实现思路

因为我们的项目是基于Spring Cloud的微服务架构,用户只需要登录一次就能访问就能访问各个微服务，不需要重复登录。我们采用的单点登录方案是将用户信息存储在客服端，是基于JWT结合RSA算法实现非对称加密的单点登录。

JWT通过生成一个toke格式的字符串基于cookie记录用户信息保存在客户端，登录信息保存在客户端可以减轻我们服务端的存储压力.

token包含三部分内容，1：头部信息，2：载荷信息，就是用户登录的一些有效的数据，3：签名，就是token的认证信息。签名的生成要结合头部信息加上载荷信息再加上私钥加密生成签名。头部信息和载荷信息使用的是Base64加密，Base64的加密和解密都非常的方便简单，所以不能存用户的敏感信息，比如用户的密码。

#### 用户登录流程

用户在登录页面正确填写用户名和密码后，点击登录，请求会携带用户名和密码到授权中心微服务，授权中心微服务使用Feign组件访问用户微服务根据用户名和密码查询用户信息，判断返回的用户是否为NULL，如果为NULL就抛出异常，提示用户输入的信息错误，不为NULL根据私钥生产JWT并写入cookie到浏览器。

登录成功后用户每次访问微服务都会获取cookie中的JWT，利用公钥验证token。若是JWT无效就会返回状态码（400用户名或密码错误），有效就会返回用户目标资源。

而因为有许多微服务可能都需要登录，所以将解析操作放在了所有微服务的网关中操作。

