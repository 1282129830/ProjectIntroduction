#### SpringCloud中的常用组件

> SpringCloudNetflixFeign

Feign可以把Rest的请求进行隐藏，伪装成类似SpringMVC的Controller一样。不用再自己拼接url，拼接参数等等操作，一切都交给Feign去做。

> Eureka注册中心

Eureka-Server：就是服务注册中心（可以是一个集群），对外暴露自己的地址。

提供者：启动后向Eureka注册自己信息（地址，服务名称等），并且定期进行服务续约

消费者：服务调用方，会定期去Eureka拉取服务列表，然后使用负载均衡算法选出一个服务进行调用。

心跳(续约)：提供者定期通过http方式向Eureka刷新自己的状态

代替品：Zookeeper和Consul

> Ribbon负载均衡器

为Ribbon配置服务提供者地址列表后，Ribbon就可基于某种负载均衡算法，自动的帮服务消费者去请求，Ribbon默认为我们提供了很多的负载均衡算法，有轮询，随机等，我们也可为Ribbon实现自定义的负载均衡算法。

###### 负载均衡的意义是什么

在计算中，负载平衡可以改善跨计算机，计算机集群，网络链接，中央处理单元或磁盘驱动器等多种计算资源的工作负载分布。负载平衡旨在优化资源使用，最大化吞吐量，最小化响应时间并避免任何单一资源的过载。使用多个组件进行负载平衡而不是单个组件可能会通过冗余来提高可靠性和可用性。负载平衡通常涉及专用软件或硬件，例如多层交换机或域名系统服务器进程。

> Hystrix断路器

Hystrix是一个延迟和容错库，用于隔离访问远程服务、第三方库，防止出现级联失败。

微服务发生异常，请求阻塞，用户不会得到响应，则tomcat的这个线程不会释放，于是越来越多的用户请求到来，越来越多的线程会阻塞，服务器支持的线程和并发数有限，请求一直阻塞，会导致服务器资源耗尽，从而导致所有其它服务都不可用，形成雪崩效应。

Hystix解决雪崩问题的手段主要是服务降级，包括：

- 线程隔离
- 服务熔断

> Zuul网关(@EnableZuulProxy)

###### 核心功能

过滤和路由分发

###### 身份认证与安全

识别每个资源的验证要求，并拒绝那些与要求不符的请求

###### 动态路由

动态将请求，通过网关分发到微服务

###### 负载分配

为每一种负载类型分配对应容量，并弃用超出限定值的请求

###### 审查与监控

在边缘位置追踪有意义的数据和统计结果，从而带来精确的生产视图

###### 压力测试

> SpringCloudBus：消息总线，默认基于RabbitMQ和Kafka实现

> SpringCloudConfig：统一配置中心，分为server端和client端

> SpringCloudStrean：数据流处理，默认基于RabbitMQ和Kafka

> SpringCloudSleuth：结合SpringCloudZipkin实现链路追踪